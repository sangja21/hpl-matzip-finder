# 맛집 검색 서비스 요구사항 정의서

## 1. 서비스 개요

**목표:**
사용자는 키워드와 지역 기반으로 맛집을 검색하고, 인기 있는 검색어를 통해 대중적인 관심 맛집 정보를 확인할 수 있습니다.

**기반 시나리오:**

* 외부 API (네이버 지역검색 API → 카카오 로컬 API 대체 가능)를 통해 검색 결과를 제공합니다.
* 사용자의 검색 데이터를 바탕으로 인기 검색어를 집계하여 제공하는 API를 제공합니다.

---

## 2. 기능적 요구사항

1. 사용자는 키워드와 지역으로 맛집을 검색할 수 있다.
2. 검색 결과는 정확도 순, 리뷰 개수 순으로 정렬 가능해야 한다.
3. 검색 결과는 페이징 처리되어야 한다.
4. 인기 키워드 API는 상위 10개의 키워드와 각각의 검색 횟수를 반환해야 한다.
5. 인기 키워드 API는 지역 기반으로 카테고리 분류가 가능해야 한다. (ex. 강남, 홍대, 성수 등)

---

## 3. 비기능적 요구사항

1. 외부 API(Naver) 장애 발생 시 fallback(Kakao) 가능해야 한다.
2. 검색 요청이 많아도 성능 저하 없이 로그가 저장되어야 한다.
3. 인기 키워드 조회는 실시간으로 빠르게 응답되어야 한다.
4. 각 기능별로 최소 하나 이상의 단위 테스트가 작성되어야 한다.
5. 응답 형식과 에러 포맷이 일관되어야 하며 문서화가 되어야 한다.
6. 인기 키워드를 저장, 조회하는 로직이 전체 검색 성능에 영향을 주지 않도록 구성해야 한다.

---

## 4. API 명세

### 4.1 맛집 검색 API

* **Endpoint**: `/search`
* **Method**: `GET`
* **Query Parameters**:

  * `keyword`: 검색어 (필수)
  * `location`: 지역 이름 (예: 오산세교) (필수)
  * `sort`: 정렬 방식 (`random`, `comment`) (선택, 기본값: `random`)
  * `page`: 페이지 번호 (기본값: 1)
* **응답 예시**:

  * 맛집 이름, 도로명 주소, 일반 주소, 카테고리, 링크, 전화번호, 위도(`mapy`), 경도(`mapx`) 포함 리스트

### 4.2 인기 키워드 API

* **Endpoint**: `/popular`
* **Method**: `GET`
* **Query Parameters**:

  * `location`: 지역명 (선택)
* **응답 예시**:

  * 키워드명, 검색 횟수를 포함한 인기 키워드 상위 10개 리스트

---

## 5. 기술 스택 및 선택 이유

| 구성요소    | 기술               | 선택 이유                         |
| ------- | ---------------- | ----------------------------- |
| Backend | Spring Boot      | Java 기반, 의존성 관리 및 생산성이 우수함    |
| DB      | PostgreSQL       | 안정적인 관계형 데이터 관리 및 트랜잭션 처리에 적합 |
| Cache   | Redis            | 인기 키워드 ZSET 기반 실시간 집계에 적합     |
| 외부 API  | Naver, Kakao     | 지역 기반 검색 데이터 확보               |
| 테스트     | JUnit5 + Mockito | 단위 테스트 및 Mock 기반 검증 용이        |

---

## 6. 사용자 흐름 요약

* 사용자는 `/search` 엔드포인트에 키워드와 지역을 입력해 검색 요청을 보낸다.
* 서버는 외부 API(Naver)에 검색 요청을 전달한다.

  * 실패 시 Kakao API로 자동 전환된다.
* 검색 결과는 클라이언트에 반환되며, 동시에 검색 키워드는 Redis와 DB에 기록된다.
* `/popular` 엔드포인트에서는 Redis ZSET을 기준으로 인기 키워드를 조회한다.
* 지역 기반 인기 키워드 API는 지역명을 기준으로 상위 키워드를 분류하여 제공한다.

---

## 7. 추가 고려 사항

* 검색 키워드 로그를 저장하기 위한 DB 테이블 설계 필요
* 장애 상황 로깅 및 전환 기록 필요 (추후 알람 시스템 고려)
* 지역 기반 인기 키워드 구현 시, 지역명 또는 H2 코드 기반 색인을 고려해야 함
* Redis 데이터의 TTL 및 갱신 주기 정책 수립 필요

---

## 8. 향후 발전 방향 (옵션)

* 유저 개인화 기반 맛집 추천 기능
* 검색 결과에 대한 즐겨찾기/스크랩 기능 추가
* 실제 리뷰 데이터와 연동한 신뢰도 향상

---

작성일: 2025-05-29
작성자: 이준열
